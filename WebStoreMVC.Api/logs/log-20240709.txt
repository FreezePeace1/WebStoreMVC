{"@t":"2024-07-08T21:46:33.2542341Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"a5dfe2a16e598e831d9b06014c0c99c9","@sp":"af8d9629bf6f853d","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VITNA0OTQ:00000001","RequestPath":"/","ConnectionId":"0HN4VITNA0OTQ"}
{"@t":"2024-07-08T21:47:20.2492351Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"39a3f45abae27ef3dfe24ccc4b9710d8","@sp":"1d5d15ed70a902be","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"dca5bcc2-0086-45c6-a6f4-3c1b16fe7404","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VITNA0OTQ:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VITNA0OTQ"}
{"@t":"2024-07-08T21:51:27.6765887Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"da64056abdf38ab038f2bbcd2a565771","@sp":"bb8084ea76ee56e5","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJ0F77K0M:00000001","RequestPath":"/","ConnectionId":"0HN4VJ0F77K0M"}
{"@t":"2024-07-08T21:51:30.6044197Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"b2ff3370b744b1563592e0a1b6880472","@sp":"818a132be2e135c2","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"b420913a-83b0-46df-8d2c-3c7b3a609151","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJ0F77K0M:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJ0F77K0M"}
{"@t":"2024-07-08T21:53:01.3442657Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"9f9cf02a13a18edf5b9b555ddbc27279","@sp":"054ace9db429de58","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJ1B4H0Q7:00000001","RequestPath":"/","ConnectionId":"0HN4VJ1B4H0Q7"}
{"@t":"2024-07-08T21:53:03.5743796Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"154542f17a87b0e5af7d5d1f5a8859ba","@sp":"ff1e3dd8b7af0db9","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"914c0c4b-362f-4bd4-a0e3-bf6f62e51f77","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJ1B4H0Q7:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJ1B4H0Q7"}
{"@t":"2024-07-08T21:54:19.5664227Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"d86cda63bbbb0a9a32b0529cb09a16f2","@sp":"141b33feb17ae3eb","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJ229AJTR:00000001","RequestPath":"/","ConnectionId":"0HN4VJ229AJTR"}
{"@t":"2024-07-08T21:54:23.4762679Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"df0beeb0097d0736c3b82c3eb77373f4","@sp":"7e48c621f52b3aef","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"07e0b463-ea38-4252-99aa-2b4229204c7d","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJ229AJTR:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJ229AJTR"}
{"@t":"2024-07-08T21:58:04.0250957Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"9ddadf3d84b810abe9d3a50a0d796ccb","@sp":"4aea8346d2f76256","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJ45B2S9S:00000001","RequestPath":"/","ConnectionId":"0HN4VJ45B2S9S"}
{"@t":"2024-07-08T21:58:23.1571116Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"c843ec60710273266347c040815d2bb9","@sp":"7d00ce1227651654","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"3ed48a25-df9a-4da8-8876-50e5b9a5ba11","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJ45B2S9S:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJ45B2S9S"}
{"@t":"2024-07-08T22:03:31.9525627Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"3988bdc2bafcbc4a0c96bcd6f5facf29","@sp":"7f82b7f6981d21ac","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJ773MT84:00000001","RequestPath":"/","ConnectionId":"0HN4VJ773MT84"}
{"@t":"2024-07-08T22:03:34.1157280Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"bd5221197334a9726528e00992e628eb","@sp":"00d6b48e76f7ef03","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"16a9d7cd-db2a-40d3-ba7c-0505555761fb","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJ773MT84:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJ773MT84"}
{"@t":"2024-07-08T22:04:27.7592195Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"bcdc5d9385d21c801ba4e1ba2da4fb1e","@sp":"49bdd8e511b3f0fc","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJ7NML2A8:00000001","RequestPath":"/","ConnectionId":"0HN4VJ7NML2A8"}
{"@t":"2024-07-08T22:04:30.6729888Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"3161d054a923f1fec7b04436ae459d5d","@sp":"61476506e25c5b6b","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"e1abaef8-a710-4792-9ae4-5977a97b4560","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJ7NML2A8:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJ7NML2A8"}
{"@t":"2024-07-08T22:05:47.5527722Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"26f9c18ecc55f2bcd527c0bd1782da5f","@sp":"99edf919298c8f23","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJ8FFOGFF:00000001","RequestPath":"/","ConnectionId":"0HN4VJ8FFOGFF"}
{"@t":"2024-07-08T22:05:49.6718283Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"f51cb89621432debbb09147890a0a8d5","@sp":"fe71e344dac626d7","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"a4d4bfbd-8fd4-443f-955d-5e5c2a49e107","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJ8FFOGFF:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJ8FFOGFF"}
{"@t":"2024-07-08T22:09:57.2899834Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"618bebe4ee937163d1d357a4fde6b9bd","@sp":"7fb65662099637d1","elapsed":"97","parameters":"@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?', @p14='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Id\", \"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);\nINSERT INTO \"Orders\" (\"Id\", \"AppUserId\", \"OrderDate\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p8, @p9, @p10, @p11, @p12);\nINSERT INTO \"OrderProduct\" (\"OrdersId\", \"ProductsId\")\nVALUES (@p13, @p14);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"183258a5-1472-4d75-a10a-ca485178b39e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJ8FFOGFF:00000010","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJ8FFOGFF"}
{"@t":"2024-07-08T22:09:57.4336862Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"618bebe4ee937163d1d357a4fde6b9bd","@sp":"7fb65662099637d1","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"183258a5-1472-4d75-a10a-ca485178b39e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJ8FFOGFF:00000010","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJ8FFOGFF"}
{"@t":"2024-07-08T22:09:57.6366414Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 103","@tr":"618bebe4ee937163d1d357a4fde6b9bd","@sp":"7fb65662099637d1","ActionId":"183258a5-1472-4d75-a10a-ca485178b39e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJ8FFOGFF:00000010","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJ8FFOGFF"}
{"@t":"2024-07-08T22:14:08.1062035Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"8e354f988f1d25a9a2a663991acfc9fe","@sp":"0062b05c72d0e9a7","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJD4F2VMT:00000001","RequestPath":"/","ConnectionId":"0HN4VJD4F2VMT"}
{"@t":"2024-07-08T22:14:13.1804499Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"cb8e9d5c8ff97211afea76a0a9b25538","@sp":"c10c45f217bdc5b9","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"2878b8bf-c80b-442c-8c2b-2e8622154382","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJD4F2VMT:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJD4F2VMT"}
{"@t":"2024-07-08T22:14:35.2934022Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"System.InvalidOperationException: The value of 'OrderProduct (Dictionary<string, object>).ProductsId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"f09385340ce004b4c995e33e15cabb5b","@sp":"ba3b8d5faddeb817","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"System.InvalidOperationException: The value of 'OrderProduct (Dictionary<string, object>).ProductsId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"c3d52d03-0283-4ff8-8d56-5ed834ef49d3","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJD4F2VMT:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJD4F2VMT"}
{"@t":"2024-07-08T22:14:35.2965639Z","@mt":"The value of 'OrderProduct (Dictionary<string, object>).ProductsId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.","@l":"Error","@x":"System.InvalidOperationException: The value of 'OrderProduct (Dictionary<string, object>).ProductsId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 106","@tr":"f09385340ce004b4c995e33e15cabb5b","@sp":"ba3b8d5faddeb817","ActionId":"c3d52d03-0283-4ff8-8d56-5ed834ef49d3","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJD4F2VMT:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJD4F2VMT"}
{"@t":"2024-07-08T22:15:54.1058594Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"6067dd2226f01064b87c6beb214b8665","@sp":"515c54f200514666","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJE43B09A:00000001","RequestPath":"/","ConnectionId":"0HN4VJE43B09A"}
{"@t":"2024-07-08T22:16:28.7009517Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"b698b04646d22c49e027edaf674a4db0","@sp":"53839ef36f903218","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJEECOLL6:00000001","RequestPath":"/","ConnectionId":"0HN4VJEECOLL6"}
{"@t":"2024-07-08T22:16:30.9857673Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"3249be27988b5251edb14441b038e572","@sp":"8783f72e809e2b10","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"d9616c0c-697d-4075-a163-6694f5c71f65","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJEECOLL6:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJEECOLL6"}
{"@t":"2024-07-08T22:16:46.4287799Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"d86f2d57ea82580debca3dc843276a7d","@sp":"6cec4f37de03d620","elapsed":"14","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)\nRETURNING \"Id\";\nINSERT INTO \"Orders\" (\"Id\", \"AppUserId\", \"OrderDate\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p7, @p8, @p9, @p10, @p11);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"ecb8fb02-fb80-4e16-afaa-be6838190c5e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJEECOLL6:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJEECOLL6"}
{"@t":"2024-07-08T22:16:46.5123209Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"d86f2d57ea82580debca3dc843276a7d","@sp":"6cec4f37de03d620","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"ecb8fb02-fb80-4e16-afaa-be6838190c5e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJEECOLL6:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJEECOLL6"}
{"@t":"2024-07-08T22:16:46.5196272Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 99","@tr":"d86f2d57ea82580debca3dc843276a7d","@sp":"6cec4f37de03d620","ActionId":"ecb8fb02-fb80-4e16-afaa-be6838190c5e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJEECOLL6:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJEECOLL6"}
{"@t":"2024-07-08T22:18:51.7606882Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"aabb2087012bb20fe43ee39286ea0d0f","@sp":"e703e909cc331470","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJFP6CI4V:00000001","RequestPath":"/","ConnectionId":"0HN4VJFP6CI4V"}
{"@t":"2024-07-08T22:18:54.8049598Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"0bc894d6c5fc38f5bed2abf2a8860eae","@sp":"ddf9ccaebe074c1b","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"722a4720-ba49-4d94-80bf-0d5b3298831c","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJFP6CI4V:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJFP6CI4V"}
{"@t":"2024-07-08T22:21:07.2613213Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"87d77658a73056999eec8eb279bf5673","@sp":"8f708358200c5a1a","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"27fcd6a8-edaa-46fc-a73e-730024eb77f6","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJFP6CI4V:0000000D","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJFP6CI4V"}
{"@t":"2024-07-08T22:21:15.8110538Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 99","@tr":"87d77658a73056999eec8eb279bf5673","@sp":"8f708358200c5a1a","ActionId":"27fcd6a8-edaa-46fc-a73e-730024eb77f6","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJFP6CI4V:0000000D","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJFP6CI4V"}
{"@t":"2024-07-08T22:23:03.3380602Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"acb797664105e16406abbaae7ffe60c5","@sp":"39a5f00856fbf881","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJI3VN87F:00000001","RequestPath":"/","ConnectionId":"0HN4VJI3VN87F"}
{"@t":"2024-07-08T22:23:05.6651613Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"6a73b73e259a51d18d6f0fbaf9e49f3a","@sp":"360630fbe53f72e5","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"f4b0d4cd-40a0-410e-b270-adbc1984f63f","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJI3VN87F:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJI3VN87F"}
{"@t":"2024-07-08T22:23:22.8948503Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"70b42a6435935ce952b69880c8c3c625","@sp":"dbdee713896f2feb","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"0386db73-25a1-4c8c-8ad3-495a4cf43e25","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJI3VN87F:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJI3VN87F"}
{"@t":"2024-07-08T22:23:22.9007044Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"Orders\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 99","@tr":"70b42a6435935ce952b69880c8c3c625","@sp":"dbdee713896f2feb","ActionId":"0386db73-25a1-4c8c-8ad3-495a4cf43e25","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJI3VN87F:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJI3VN87F"}
{"@t":"2024-07-08T22:28:14.3303053Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"3c1a9bc0b94e0040799ae1de7ad81028","@sp":"12330e4c32993c65","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJL0SI5CK:00000001","RequestPath":"/","ConnectionId":"0HN4VJL0SI5CK"}
{"@t":"2024-07-08T22:28:17.3279293Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"a8acfed87e97c25267cb6e1a18d60b8e","@sp":"ee584456a80b1cd8","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"0e2bf43b-8ab9-4bcd-a91b-1f645aada09e","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJL0SI5CK:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJL0SI5CK"}
{"@t":"2024-07-08T22:29:02.1440815Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"ee81b7f9aad9d9f6858cb38ad3e0a09f","@sp":"3c9a6914b2e673ae","elapsed":"26","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)\nRETURNING \"Id\";\nINSERT INTO \"Orders\" (\"Id\", \"AppUserId\", \"OrderDate\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p7, @p8, @p9, @p10, @p11);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"b3049092-597e-48de-988c-5735758c9fdf","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJL0SI5CK:0000000B","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJL0SI5CK"}
{"@t":"2024-07-08T22:29:02.1828084Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"ee81b7f9aad9d9f6858cb38ad3e0a09f","@sp":"3c9a6914b2e673ae","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"b3049092-597e-48de-988c-5735758c9fdf","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJL0SI5CK:0000000B","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJL0SI5CK"}
{"@t":"2024-07-08T22:29:02.1883042Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23502\n    MessageText: null value in column \"AppUserId\" of relation \"CustomersInfo\" violates not-null constraint\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ColumnName: AppUserId\n    File: execMain.c\n    Line: 2003\n    Routine: ExecConstraints\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 99","@tr":"ee81b7f9aad9d9f6858cb38ad3e0a09f","@sp":"3c9a6914b2e673ae","ActionId":"b3049092-597e-48de-988c-5735758c9fdf","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJL0SI5CK:0000000B","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJL0SI5CK"}
{"@t":"2024-07-08T22:32:19.3797052Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"1dfdcb885a10156e7b50d21611e0c283","@sp":"11f57606403a5c0d","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJN9TMF0M:00000001","RequestPath":"/","ConnectionId":"0HN4VJN9TMF0M"}
{"@t":"2024-07-08T22:32:23.5560316Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"18a9f0f4268c60688feb440efab1e89e","@sp":"6c2ed69a39e4ed6a","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"958951fa-481e-49b7-80c6-651ff24d8dce","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJN9TMF0M:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJN9TMF0M"}
{"@t":"2024-07-08T22:32:37.9053176Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"acbe40acd24c36dc67808abc6e0a4d88","@sp":"30658a86c2e17640","elapsed":"24","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)\nRETURNING \"Id\";\nINSERT INTO \"Orders\" (\"Id\", \"AppUserId\", \"OrderDate\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p7, @p8, @p9, @p10, @p11);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d509acd8-cd62-44b0-b81d-a1cf1449b398","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJN9TMF0M:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJN9TMF0M"}
{"@t":"2024-07-08T22:32:37.9790827Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"acbe40acd24c36dc67808abc6e0a4d88","@sp":"30658a86c2e17640","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"d509acd8-cd62-44b0-b81d-a1cf1449b398","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJN9TMF0M:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJN9TMF0M"}
{"@t":"2024-07-08T22:32:37.9844732Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 90","@tr":"acbe40acd24c36dc67808abc6e0a4d88","@sp":"30658a86c2e17640","ActionId":"d509acd8-cd62-44b0-b81d-a1cf1449b398","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJN9TMF0M:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJN9TMF0M"}
{"@t":"2024-07-08T22:41:03.9303042Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"1d482f75ccc6fa7271cdccc0a93838f9","@sp":"f4a2bae92d5cad0b","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJS688S2R:00000001","RequestPath":"/","ConnectionId":"0HN4VJS688S2R"}
{"@t":"2024-07-08T22:41:05.7494054Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"eb87dce65f108e4d93dd1082eb9a6c3d","@sp":"a4e4a29dc1765365","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"4139f063-6068-41dd-8d79-c5f7bc296cd4","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJS688S2R:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJS688S2R"}
{"@t":"2024-07-08T22:41:46.4547743Z","@mt":"Object reference not set to an instance of an object.","@l":"Error","@x":"System.NullReferenceException: Object reference not set to an instance of an object.\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 70","@tr":"2872fe91cc7ab6c582f0065b69ad3d0e","@sp":"27e32ed3d02320da","ActionId":"d70b4ed1-ec50-4fcd-93d7-74c3c3b1d442","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJS688S2R:0000000B","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJS688S2R"}
{"@t":"2024-07-08T22:42:38.1110552Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"6a67cf85e932431922b77c978e2c8d98","@sp":"4b26405a72d629c0","elapsed":"10","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)\nRETURNING \"Id\";\nINSERT INTO \"Orders\" (\"Id\", \"AppUserId\", \"OrderDate\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p7, @p8, @p9, @p10, @p11);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"a5a76c5e-0b06-4a37-bc17-852178b29229","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJS688S2R:0000000C","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJS688S2R"}
{"@t":"2024-07-08T22:42:38.1616748Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"6a67cf85e932431922b77c978e2c8d98","@sp":"4b26405a72d629c0","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"a5a76c5e-0b06-4a37-bc17-852178b29229","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJS688S2R:0000000C","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJS688S2R"}
{"@t":"2024-07-08T22:42:38.1709605Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"6a67cf85e932431922b77c978e2c8d98","@sp":"4b26405a72d629c0","ActionId":"a5a76c5e-0b06-4a37-bc17-852178b29229","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJS688S2R:0000000C","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJS688S2R"}
{"@t":"2024-07-08T22:44:55.2221503Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"e46c22f23474384a07b251dfe43a8172","@sp":"cb1bc55657de51c7","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VJUAVAPD7:00000001","RequestPath":"/","ConnectionId":"0HN4VJUAVAPD7"}
{"@t":"2024-07-08T22:46:26.4785183Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"710588e9e89bcce044f2864ff1c6ad7f","@sp":"35184b5050f45cd2","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"beac8841-e003-41a1-9dcc-0a0c739c9468","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VJUAVAPD7:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VJUAVAPD7"}
{"@t":"2024-07-08T22:46:46.4161605Z","@mt":"Object reference not set to an instance of an object.","@l":"Error","@x":"System.NullReferenceException: Object reference not set to an instance of an object.\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 70","@tr":"81b39e630b193c221ea99c54aeda2ff6","@sp":"e2063463afae907c","ActionId":"a53fa61c-051d-49fc-add2-37f74536cef1","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VJUAVAPD7:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VJUAVAPD7"}
{"@t":"2024-07-08T22:56:01.8334204Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"67a19ed90addab7c508df8e4d0d5c07f","@sp":"8246a5fe62b19163","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VK4HRC8S2:00000001","RequestPath":"/","ConnectionId":"0HN4VK4HRC8S2"}
{"@t":"2024-07-08T22:56:05.9685528Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"7d8a8ab26dabf1840f0100edfd41b6d5","@sp":"e70ae29586462baa","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"a32fa978-f1c7-40e8-a6fe-3c07dbd62b7a","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VK4HRC8S2:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VK4HRC8S2"}
{"@t":"2024-07-08T22:58:16.1150760Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"c9214dddf0ac180e2ea4580164e4e50a","@sp":"40f9246bd9b9f508","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VK5PLCVFB:00000001","RequestPath":"/","ConnectionId":"0HN4VK5PLCVFB"}
{"@t":"2024-07-08T22:58:18.9719370Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"313253a2c0131e7f59711bed54dc0a80","@sp":"47e0ff0c3f001074","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"6b630e96-19ca-44eb-bec4-f1a9441864c8","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VK5PLCVFB:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VK5PLCVFB"}
{"@t":"2024-07-08T22:58:35.5699510Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"561e313e535382776470d2ef07dad466","@sp":"02ef3d12cd061076","elapsed":"15","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)\nRETURNING \"Id\";\nINSERT INTO \"Orders\" (\"Id\", \"AppUserId\", \"OrderDate\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p7, @p8, @p9, @p10, @p11);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d23cbaa4-cd78-45ff-a0bb-5953613ae4bf","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VK5PLCVFB:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VK5PLCVFB"}
{"@t":"2024-07-08T22:58:35.6487902Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"561e313e535382776470d2ef07dad466","@sp":"02ef3d12cd061076","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"d23cbaa4-cd78-45ff-a0bb-5953613ae4bf","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VK5PLCVFB:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VK5PLCVFB"}
{"@t":"2024-07-08T22:58:35.6545475Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 86","@tr":"561e313e535382776470d2ef07dad466","@sp":"02ef3d12cd061076","ActionId":"d23cbaa4-cd78-45ff-a0bb-5953613ae4bf","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VK5PLCVFB:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VK5PLCVFB"}
{"@t":"2024-07-08T23:07:18.9097709Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","elapsed":"153","parameters":"@__normalizedName_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT a.\"Id\", a.\"ConcurrencyStamp\", a.\"Name\", a.\"NormalizedName\"\nFROM \"AspNetRoles\" AS a\nWHERE a.\"NormalizedName\" = @__normalizedName_0\nLIMIT 1","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2024-07-08T23:07:19.0533433Z","@mt":"An exception occurred while iterating over the results of a query for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Npgsql.PostgresException (0x80004005): 42P01: relation \"AspNetRoles\" does not exist\n\nPOSITION: 72\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\n  Exception data:\n    Severity: ERROR\n    SqlState: 42P01\n    MessageText: relation \"AspNetRoles\" does not exist\n    Position: 72\n    File: parse_relation.c\n    Line: 1449\n    Routine: parserOpenTable","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Npgsql.PostgresException (0x80004005): 42P01: relation \"AspNetRoles\" does not exist\n\nPOSITION: 72\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\n  Exception data:\n    Severity: ERROR\n    SqlState: 42P01\n    MessageText: relation \"AspNetRoles\" does not exist\n    Position: 72\n    File: parse_relation.c\n    Line: 1449\n    Routine: parserOpenTable","EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
{"@t":"2024-07-08T23:10:39.9710201Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","elapsed":"7","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"ALTER TABLE \"CustomersInfo\" DROP CONSTRAINT \"FK_CustomersInfo_AspNetUsers_AppUserId\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2024-07-08T23:11:41.6244997Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"4a43fdc35f6e55873a650ec3f7b34a63","@sp":"7ae4e2871ad375a6","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VKD9TSEPB:00000001","RequestPath":"/","ConnectionId":"0HN4VKD9TSEPB"}
{"@t":"2024-07-08T23:11:44.0174074Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"b1eacb5778a42b0d3b39004afd0d8dfc","@sp":"ccb6f0649a0ae913","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"47dfec09-dbe3-4f3d-aee2-8f6bb99a8ff3","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VKD9TSEPB:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VKD9TSEPB"}
{"@t":"2024-07-08T23:12:20.5053345Z","@mt":"Object reference not set to an instance of an object.","@l":"Error","@x":"System.NullReferenceException: Object reference not set to an instance of an object.\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 55","@tr":"e1afc04bd1e4cb51f015173ce0423a19","@sp":"ac0d6791daa32726","ActionId":"4420173f-79a6-44a5-a42c-733286b3897e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VKD9TSEPB:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VKD9TSEPB"}
{"@t":"2024-07-08T23:14:16.7654100Z","@mt":"Sequence contains no elements.","@l":"Error","@x":"System.InvalidOperationException: Sequence contains no elements.\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"19ef430a9ddba225633869e94840a0a8","@sp":"ea615dfab6995672","ActionId":"2368c93c-7125-4810-91e4-a52d03cdc405","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VKD9TSEPC:00000001","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VKD9TSEPC"}
{"@t":"2024-07-08T23:15:07.5813066Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"1bfbdc4a7117623300dfb3a32639e0b8","@sp":"9e657e1a9a83b715","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VKF736D3Q:00000001","RequestPath":"/","ConnectionId":"0HN4VKF736D3Q"}
{"@t":"2024-07-08T23:15:10.8740217Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"8801de0318213633e79b81c4c78f53a0","@sp":"6a1508b082882d8e","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"4d8cc1ac-059f-437d-9fce-7eb53155bd12","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VKF736D3Q:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VKF736D3Q"}
{"@t":"2024-07-08T23:15:29.6563262Z","@mt":"Object reference not set to an instance of an object.","@l":"Error","@x":"System.NullReferenceException: Object reference not set to an instance of an object.\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 63","@tr":"2039c912ea9d069a27282028217a7803","@sp":"ffc5b7969545972d","ActionId":"d40b382f-74a4-455d-8edf-537304a43ea8","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VKF736D3Q:0000000A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VKF736D3Q"}
{"@t":"2024-07-08T23:16:58.0076591Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"d63eb0c3dc816c4a4ec0874c79824a19","@sp":"6e9c22e8338baf91","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VKG872MS7:00000001","RequestPath":"/","ConnectionId":"0HN4VKG872MS7"}
{"@t":"2024-07-08T23:17:01.2832957Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"922fe38c2d9db60367b6b785aa6569cf","@sp":"8d2d91c7c67321b0","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"3c8ba363-894d-4752-9e5c-bedda9400521","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VKG872MS7:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VKG872MS7"}
{"@t":"2024-07-08T23:48:33.7845248Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"024bf2f700b09c850e19c60606fcb343","@sp":"580082a656614c90","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VL1T6JMS5:00000001","RequestPath":"/","ConnectionId":"0HN4VL1T6JMS5"}
{"@t":"2024-07-08T23:48:36.8079406Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"6f43ee097ede60d021778f17e29d2fed","@sp":"34a420b5d1d21906","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"4a787519-8499-4100-8199-c656353be45e","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VL1T6JMS5:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VL1T6JMS5"}
{"@t":"2024-07-08T23:49:41.0131019Z","@mt":"Cannot create a DbSet for 'OrderProduct' because this type is not included in the model for the context.","@l":"Error","@x":"System.InvalidOperationException: Cannot create a DbSet for 'OrderProduct' because this type is not included in the model for the context.\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 92","@tr":"3468eb19b8bfb2bcde6e18e5a9936b48","@sp":"ea09e09762b4f32c","ActionId":"fc340e47-5eb8-4fcc-af58-4f30ba6ff119","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL1T6JMS5:00000013","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL1T6JMS5"}
{"@t":"2024-07-09T00:01:13.9934768Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"dd6146e416564cdb6cbacac0849c16b5","@sp":"1f9a2c29a60344aa","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VL8VIOPB7:00000001","RequestPath":"/","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:01:21.8548917Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"ebdc4c1f63f5b6e5ee73fb1fa1158af3","@sp":"3e609fc59c56bfa6","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"4ce21b34-f3ca-420f-9197-24013885db14","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB7:00000003","RequestPath":"/Home/Store","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:02:02.0572081Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"e4dc86f4dfed95d6b9a3ff1f63f0c843","@sp":"1ffd9391fec19676","elapsed":"19","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)\nRETURNING \"Id\";\nINSERT INTO \"Orders\" (\"Id\", \"AppUserId\", \"OrderDate\", \"ProductIds\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p7, @p8, @p9, @p10, @p11, @p12);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"1e440985-2095-4e0f-ba2c-7c8f10f59bc0","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB7:00000014","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:02:02.1130370Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"e4dc86f4dfed95d6b9a3ff1f63f0c843","@sp":"1ffd9391fec19676","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"1e440985-2095-4e0f-ba2c-7c8f10f59bc0","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB7:00000014","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:02:02.1195896Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 91","@tr":"e4dc86f4dfed95d6b9a3ff1f63f0c843","@sp":"1ffd9391fec19676","ActionId":"1e440985-2095-4e0f-ba2c-7c8f10f59bc0","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB7:00000014","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:02:35.1213030Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ConstraintName: FK_Orders_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"c92b14854126ffc8319dd15c5c2f0dcd","@sp":"343f26ef815b8749","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ConstraintName: FK_Orders_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"1e440985-2095-4e0f-ba2c-7c8f10f59bc0","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB7:00000015","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:02:35.1293247Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ConstraintName: FK_Orders_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 91","@tr":"c92b14854126ffc8319dd15c5c2f0dcd","@sp":"343f26ef815b8749","ActionId":"1e440985-2095-4e0f-ba2c-7c8f10f59bc0","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB7:00000015","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:05:43.1419569Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 73","@tr":"1e74d3878844e1e17663de9f2b8b6078","@sp":"4c89d022a78cf384","ActionId":"1e440985-2095-4e0f-ba2c-7c8f10f59bc0","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB7:0000002A","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL8VIOPB7"}
{"@t":"2024-07-09T00:08:21.6063059Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"ccef6c5e6ba61f8349b90ca41550967c","@sp":"f971b887b94a3641","ActionId":"b51092cf-8a29-4a6b-a110-7babd0365668","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VL8VIOPB8:00000001","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VL8VIOPB8"}
{"@t":"2024-07-09T00:15:36.0374080Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"f9a6b78138458e3129254cf1ba42b69e","@sp":"b021bcde9ca880ae","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VLH0F1EDB:00000001","RequestPath":"/","ConnectionId":"0HN4VLH0F1EDB"}
{"@t":"2024-07-09T00:16:41.0166875Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"8e3dba5603a0840fb34ccb9024412e11","@sp":"3a224f694fb0601e","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VLHK1BSEB:00000001","RequestPath":"/","ConnectionId":"0HN4VLHK1BSEB"}
{"@t":"2024-07-09T00:16:50.0634498Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"8c03242948f12f9c9fcd5beadab388e2","@sp":"03dda97324f36e30","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"d8f4d1d8-a0df-4304-8184-aefaeaeb206e","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VLHK1BSEB:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VLHK1BSEB"}
{"@t":"2024-07-09T00:17:13.0240886Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 73","@tr":"cc9bcd882ff4a6bbe2ad1704c6f2b649","@sp":"be6c7d1d7ee74f59","ActionId":"b570d597-c49f-4765-9eba-c78f118dfe33","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VLHK1BSEB:00000014","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VLHK1BSEB"}
{"@t":"2024-07-09T00:20:54.0951037Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"6e95b490ea4a73fa860d68a8d8378e9b","@sp":"4fbe96aa9538355f","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VLJV7NVKQ:00000001","RequestPath":"/","ConnectionId":"0HN4VLJV7NVKQ"}
{"@t":"2024-07-09T00:26:06.3811530Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"3580484982aa54a363c7156d53ac05dd","@sp":"a771ed28618fed9e","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN4VLMSAEQ3M:00000001","RequestPath":"/","ConnectionId":"0HN4VLMSAEQ3M"}
{"@t":"2024-07-09T00:26:09.4520255Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"8dae0256914d22871bb663983676e55c","@sp":"42302201ddb5a94b","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"696906c1-ccb9-4f8b-9ac2-df3ba338a81f","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN4VLMSAEQ3M:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN4VLMSAEQ3M"}
{"@t":"2024-07-09T00:26:31.4937709Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 73","@tr":"530629c79a3cd056e080accba0d9a2a4","@sp":"f79362e405641ee5","ActionId":"f7dc48ec-6fa2-489f-8352-adce405af74f","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VLMSAEQ3M:0000000F","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VLMSAEQ3M"}
{"@t":"2024-07-09T00:26:59.3910062Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"6eeeefd2c5b0751ce2eb155bfe0cc934","@sp":"bb9d4580bbae8a16","ActionId":"6d3d74ce-71bf-47a9-84da-96e945e566dc","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN4VLMSAEQ3M:00000010","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN4VLMSAEQ3M"}
{"@t":"2024-07-09T11:31:55.1029004Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"d9ba24c0f5b593990caab2e31f156ba3","@sp":"6350ee4445aa8714","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN501AU5OO15:00000001","RequestPath":"/","ConnectionId":"0HN501AU5OO15"}
{"@t":"2024-07-09T11:32:00.9546777Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"d1a8af2239870571f13ae6b7c52cbc15","@sp":"b75c5cd48092329a","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"7640386d-6b08-4c86-b60a-4ba803ccb06d","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN501AU5OO18:00000003","RequestPath":"/Home/Store","ConnectionId":"0HN501AU5OO18"}
{"@t":"2024-07-09T11:33:42.6524775Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"6df4fe2c6faa4b2e0c8244b7e0e7c395","@sp":"524b4c9b90b8261e","elapsed":"11","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?' (DbType = Int32), @p16='?', @p17='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"CustomersInfo\" (\"Address\", \"AppUserId\", \"City\", \"FirstName\", \"LastName\", \"Patronymic\", \"PhoneNumber\")\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)\nRETURNING \"Id\";\nINSERT INTO \"Orders\" (\"OrderId\", \"AppUserId\", \"OrderDate\", \"ProductsCount\", \"TotalPrice\")\nVALUES (@p7, @p8, @p9, @p10, @p11);\nINSERT INTO \"OrderProducts\" (\"OrderId\", \"ProductId\")\nVALUES (@p12, @p13)\nRETURNING \"Id\";\nINSERT INTO \"OrderProducts\" (\"OrderId\", \"ProductId\")\nVALUES (@p14, @p15)\nRETURNING \"Id\";\nINSERT INTO \"OrderProducts\" (\"OrderId\", \"ProductId\")\nVALUES (@p16, @p17)\nRETURNING \"Id\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"ba96d074-82c7-4cd7-a8ae-94ffeaae1679","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501AU5OO18:00000018","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501AU5OO18"}
{"@t":"2024-07-09T11:33:42.6949522Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"6df4fe2c6faa4b2e0c8244b7e0e7c395","@sp":"524b4c9b90b8261e","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"ba96d074-82c7-4cd7-a8ae-94ffeaae1679","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501AU5OO18:00000018","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501AU5OO18"}
{"@t":"2024-07-09T11:33:42.7030834Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"CustomersInfo\" violates foreign key constraint \"FK_CustomersInfo_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: CustomersInfo\n    ConstraintName: FK_CustomersInfo_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 98","@tr":"6df4fe2c6faa4b2e0c8244b7e0e7c395","@sp":"524b4c9b90b8261e","ActionId":"ba96d074-82c7-4cd7-a8ae-94ffeaae1679","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501AU5OO18:00000018","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501AU5OO18"}
{"@t":"2024-07-09T11:34:27.8851163Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ConstraintName: FK_Orders_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"19750e0ea8f3dbe60708de3eb5c1d9a4","@sp":"f2fc7bcc465b094f","contextType":"WebStoreMVC.DAL.Context.WebStoreContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ConstraintName: FK_Orders_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"ba96d074-82c7-4cd7-a8ae-94ffeaae1679","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501AU5OO18:00000019","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501AU5OO18"}
{"@t":"2024-07-09T11:34:27.8883043Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23503\n    MessageText: insert or update on table \"Orders\" violates foreign key constraint \"FK_Orders_AspNetUsers_AppUserId\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Orders\n    ConstraintName: FK_Orders_AspNetUsers_AppUserId\n    File: ri_triggers.c\n    Line: 2608\n    Routine: ri_ReportViolation\n   --- End of inner exception stack trace ---\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.Consume(RelationalDataReader reader, Boolean async, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 98","@tr":"19750e0ea8f3dbe60708de3eb5c1d9a4","@sp":"f2fc7bcc465b094f","ActionId":"ba96d074-82c7-4cd7-a8ae-94ffeaae1679","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501AU5OO18:00000019","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501AU5OO18"}
{"@t":"2024-07-09T11:46:16.6822383Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","elapsed":"9","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"ALTER TABLE \"CustomersInfo\" DROP CONSTRAINT \"FK_CustomersInfo_AspNetUsers_AppUserId\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2024-07-09T11:50:50.7877284Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"b42733ea34f31692555ee80723678d98","@sp":"194e404379cfd9a8","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN501LGKIG71:00000001","RequestPath":"/","ConnectionId":"0HN501LGKIG71"}
{"@t":"2024-07-09T11:50:53.7472492Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"c430859f09e3d19853a973a89281ca12","@sp":"457b313ace16255b","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"0a64acb0-203b-4dfd-8135-49016880075c","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN501LGKIG71:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN501LGKIG71"}
{"@t":"2024-07-09T11:58:13.9882849Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"b7d194ceb6b8598dfd497ed89c0f69bf","@sp":"bf73fb57285fd176","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN501PKG6MUK:00000001","RequestPath":"/","ConnectionId":"0HN501PKG6MUK"}
{"@t":"2024-07-09T11:58:17.2679352Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"7db9bd1e9b2a4c5dd005ce85894d92bf","@sp":"3ec114f430fcdafc","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"12fa43ca-94dc-4147-8403-912e24f97e27","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN501PKG6MUK:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN501PKG6MUK"}
{"@t":"2024-07-09T11:58:51.0051318Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 73","@tr":"d4fda820cd6524de53e8a7a8f1b80899","@sp":"c55a3efdc988536c","ActionId":"ee432d0c-8b35-47c4-aa30-9dea92a4913c","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501PKG6MUK:0000001C","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501PKG6MUK"}
{"@t":"2024-07-09T12:04:39.4653573Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"3431b6971d070da462347b00c53f2f13","@sp":"494c695d1f7b2b5b","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN501T7J8H14:00000001","RequestPath":"/","ConnectionId":"0HN501T7J8H14"}
{"@t":"2024-07-09T12:04:45.0158454Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"aea6a4cbc6830f4b07258c71b511238c","@sp":"32586bcb4abdf428","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"72d835f3-aa02-4a23-ae86-7af77aa39068","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN501T7J8H14:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN501T7J8H14"}
{"@t":"2024-07-09T12:04:55.8072705Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"56169c3477c153c6ea3726b327821917","@sp":"971fb99bdda16148","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"72d835f3-aa02-4a23-ae86-7af77aa39068","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN501T7J8H14:0000000A","RequestPath":"/Home/Store","ConnectionId":"0HN501T7J8H14"}
{"@t":"2024-07-09T12:05:35.1328705Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 73","@tr":"099f8e19873e459d06ea9ae58ac76b26","@sp":"7791bd17261dabad","ActionId":"498d945e-5074-4a8a-bb9b-b30ee234dc27","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501T7J8H14:00000032","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501T7J8H14"}
{"@t":"2024-07-09T12:06:58.1237093Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"574001348fe5d70b86b9828b23e0187a","@sp":"03b27015d3a59541","ActionId":"8df6d3a3-a9dc-48d1-afc0-b5e55d9e1fcf","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501T7J8H14:00000034","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501T7J8H14"}
{"@t":"2024-07-09T12:09:15.3640607Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"26a14d4aa0c23f1082e275cb53fe7823","@sp":"a350455fa827a31a","ActionId":"de93e362-d62d-4c4b-a7d7-abae56cabab7","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN501T7J8H15:00000001","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN501T7J8H15"}
{"@t":"2024-07-09T12:10:39.0645959Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"9b2b8bd90d3e4a02bedf2a088cbe72a5","@sp":"3823677836a7e1c6","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN5020IHUFOB:00000001","RequestPath":"/","ConnectionId":"0HN5020IHUFOB"}
{"@t":"2024-07-09T12:10:56.1137642Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"a41188e2162f3331965b6e4e6de28742","@sp":"8a8d0321d798ccda","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"bae8384c-b4f3-405a-9b15-553fc8b62329","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN5020IHUFOB:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN5020IHUFOB"}
{"@t":"2024-07-09T12:11:27.7544020Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto) in /home/alexander/RiderProjects/WebStoreMVC/WebStoreMVC.Application/Services/OrderService.cs:line 75","@tr":"5ead428da38c6ce9d5a9af85979cf19e","@sp":"47daf0f90b067d68","ActionId":"5259afcc-a45b-4376-bd8f-857b000a492d","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN5020IHUFOB:00000028","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN5020IHUFOB"}
{"@t":"2024-07-09T12:13:54.6330164Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"a35ac5b985bfd3d6f7032bfb3c758de7","@sp":"c22d40d0ba187d9b","ActionId":"13084084-7520-45bb-bcfa-f5c27baa4399","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN5020IHUFOC:00000001","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN5020IHUFOC"}
{"@t":"2024-07-09T12:15:46.1967073Z","@mt":"The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'CustomerInfo' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"c101765864c5971afd816eebde6e1571","@sp":"ef8dd1352d9ae495","ActionId":"37108d66-abe9-4676-83ba-0d38a53dd69e","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN5020IHUFOC:00000003","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN5020IHUFOC"}
{"@t":"2024-07-09T12:16:13.7616853Z","@mt":"The instance of entity type 'OrderProduct' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'OrderProduct' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddRangeAsync(IEnumerable`1 entities, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"ed390694be50985ad693295581f7fc3a","@sp":"f0eff1d6951e6002","ActionId":"b1a768ce-ff6c-4c7b-ac50-3bc6c5b9edff","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN5020IHUFOC:00000005","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN5020IHUFOC"}
{"@t":"2024-07-09T12:17:12.4191147Z","@mt":"The instance of entity type 'OrderProduct' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.","@l":"Error","@x":"System.InvalidOperationException: The instance of entity type 'OrderProduct' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddRangeAsync(IEnumerable`1 entities, CancellationToken cancellationToken)\n   at WebStoreMVC.Application.Services.OrderService.SaveCustomerInfo(CustomerInfoDto dto)","@tr":"24ff167198072577a6a3e2d3dfa86b8b","@sp":"4e6d45ffe4847035","ActionId":"b1a768ce-ff6c-4c7b-ac50-3bc6c5b9edff","ActionName":"WebStoreMVC.Controllers.OrderController.SaveCustomerInfo (WebStoreMVC.Api)","RequestId":"0HN5020IHUFOC:00000007","RequestPath":"/SaveCustomerInfo","ConnectionId":"0HN5020IHUFOC"}
{"@t":"2024-07-09T12:36:21.0558758Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"3b20c74fe64c56ffe0aaaf99928dc0ee","@sp":"f3342d292229b4e9","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN502EU4AC6G:00000001","RequestPath":"/","ConnectionId":"0HN502EU4AC6G"}
{"@t":"2024-07-09T12:36:24.7450520Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"08b5f2640c52a7c3596e52cfbc501f30","@sp":"b3f5770a1b1d6bbb","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"ca56373e-3dda-46cf-9754-91316cca2483","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN502EU4AC6G:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN502EU4AC6G"}
{"@t":"2024-07-09T13:28:25.4059884Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"0d9bf25b3ec22eab7a9fc9d8fb9436b4","@sp":"cf18983c6461fce4","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN503C1E8HHR:00000001","RequestPath":"/","ConnectionId":"0HN503C1E8HHR"}
{"@t":"2024-07-09T13:28:29.1241287Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"14ef82034f268794dbc95c998f1c2174","@sp":"d5e7eaa3420b4e99","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"4524051e-eaf1-4ddf-b710-26894b60ed45","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN503C1E8HHR:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN503C1E8HHR"}
{"@t":"2024-07-09T13:30:15.4996143Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"f79323981020ac9f5ac8e165b460e744","@sp":"044bc881383615aa","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN503D21BDQ0:00000001","RequestPath":"/","ConnectionId":"0HN503D21BDQ0"}
{"@t":"2024-07-09T13:31:07.8569185Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"7478d4069d6192782fb8b453fec12149","@sp":"6f20579055ae00f6","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN503DHRNG8G:00000001","RequestPath":"/","ConnectionId":"0HN503DHRNG8G"}
{"@t":"2024-07-09T13:31:58.5747997Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"fa323c68a88853ab0f22b6e129938443","@sp":"4857859990e01aab","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"f3099e73-aa5f-41f8-95b4-7c8e74a61655","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN503DHRNG8G:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN503DHRNG8G"}
{"@t":"2024-07-09T18:21:14.7024726Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"2cff7ef1f5673a79533c2ff6fbb98a46","@sp":"bc89f88ae9a19280","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN508FLGBCVK:00000001","RequestPath":"/","ConnectionId":"0HN508FLGBCVK"}
{"@t":"2024-07-09T18:28:40.8473882Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"91d162fa8aec24f327be21bc86c00af8","@sp":"7781da3014e06072","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN508JQ9R4PF:00000001","RequestPath":"/","ConnectionId":"0HN508JQ9R4PF"}
{"@t":"2024-07-09T18:28:43.0635343Z","@mt":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","@l":"Warning","@tr":"ebe3f95f18d8b9745e448d40e344479e","@sp":"0ad9837269a82d44","EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"7eaf7485-8e71-4077-9288-3e46c5ff1f46","ActionName":"WebStoreMVC.Controllers.HomeController.Store (WebStoreMVC.Api)","RequestId":"0HN508JQ9R4PF:00000002","RequestPath":"/Home/Store","ConnectionId":"0HN508JQ9R4PF"}
